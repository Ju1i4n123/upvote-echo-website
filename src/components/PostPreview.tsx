
import { Card } from "@/components/ui/card";
import { Button } from "@/components/ui/button";
import { PostData } from "@/pages/Index";

interface PostPreviewProps {
  postData: PostData;
}

export const PostPreview = ({ postData }: PostPreviewProps) => {
  const formatCount = (count: string) => {
    if (postData.approximateCounts && count) {
      return count + "+";
    }
    return count;
  };

  return (
    <div className="space-y-4">
      <div className="flex justify-between items-center">
        <h3 className="text-lg font-semibold">Preview</h3>
        <div className="flex space-x-2">
          <Button variant="outline" size="sm">Reset</Button>
          <Button size="sm" className="bg-blue-600 hover:bg-blue-700">Download</Button>
        </div>
      </div>
      
      <Card className={`p-4 ${postData.darkMode ? 'bg-gray-900 text-white' : 'bg-white'} ${postData.wideLayout ? 'max-w-2xl' : 'max-w-md'} mx-auto`}>
        <div className="flex items-start space-x-3">
          <div className="w-10 h-10 bg-orange-500 rounded-full flex items-center justify-center text-white font-bold">
            {postData.avatar || "🤖"}
          </div>
          
          <div className="flex-1 min-w-0">
            <div className="flex items-center space-x-2 mb-1">
              <span className="font-medium text-orange-500">r/{postData.subreddit}</span>
              {postData.badge === "Verified" && (
                <svg viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg" className="w-3 h-3">
                  <path d="M14.0817 1.79772C13.3426 1.16417 12.973 0.847392 12.5585 0.726659C12.1932 0.620248 11.8051 0.620248 11.4398 0.726659C11.0254 0.847392 10.6558 1.16417 9.91663 1.79772L9.1205 2.48012C8.78779 2.7653 8.62144 2.90789 8.43376 3.00945C8.26729 3.09954 8.08888 3.16554 7.90385 3.20548C7.69527 3.2505 7.47617 3.2505 7.03797 3.2505H6.41495C5.29484 3.2505 4.73479 3.2505 4.30697 3.46849C3.93064 3.66024 3.62468 3.9662 3.43294 4.34252C3.21495 4.77035 3.21495 5.3304 3.21495 6.4505L3.21495 7.052C3.21495 7.48649 3.21495 7.70373 3.17064 7.91071C3.13134 8.09432 3.06637 8.27148 2.97766 8.43697C2.87765 8.62353 2.73721 8.78927 2.45633 9.12075L1.7691 9.93176C1.14633 10.6667 0.83494 11.0342 0.716132 11.4455C0.611405 11.8081 0.611405 12.1929 0.716132 12.5555C0.83494 12.9668 1.14632 13.3343 1.76909 14.0692L2.45633 14.8803C2.73721 15.2117 2.87765 15.3775 2.97766 15.564C3.06637 15.7295 3.13134 15.9067 3.17064 16.0903C3.21495 16.2973 3.21495 16.5145 3.21495 16.949V17.5505C3.21495 18.6706 3.21495 19.2307 3.43294 19.6585C3.62468 20.0348 3.93064 20.3408 4.30697 20.5325C4.73479 20.7505 5.29484 20.7505 6.41495 20.7505H7.03797C7.47617 20.7505 7.69527 20.7505 7.90385 20.7955C8.08888 20.8355 8.26729 20.9015 8.43376 20.9916C8.62144 21.0931 8.78779 21.2357 9.1205 21.5209L9.91663 22.2033C10.6558 22.8368 11.0254 23.1536 11.4398 23.2743C11.8051 23.3808 12.1932 23.3808 12.5585 23.2743C12.973 23.1536 13.3426 22.8368 14.0817 22.2033L14.8778 21.5209C15.2105 21.2357 15.3769 21.0931 15.5646 20.9916C15.731 20.9015 15.9095 20.8355 16.0945 20.7955C16.3031 20.7505 16.5222 20.7505 16.9604 20.7505H17.5492C18.6693 20.7505 19.2293 20.7505 19.6571 20.5325C20.0335 20.3408 20.3394 20.0348 20.5312 19.6585C20.7492 19.2307 20.7492 18.6706 20.7492 17.5505L20.7492 16.9617C20.7492 16.5235 20.7492 16.3044 20.7942 16.0958C20.8341 15.9108 20.9001 15.7324 20.9902 15.5659C21.0918 15.3782 21.2344 15.2119 21.5195 14.8792L22.2019 14.083C22.8355 13.3439 23.1523 12.9743 23.273 12.5598C23.3794 12.1945 23.3794 11.8065 23.273 11.4412C23.1523 11.0267 22.8355 10.6571 22.2019 9.91797L21.5195 9.12184C21.2344 8.78913 21.0918 8.62278 20.9902 8.4351C20.9001 8.26863 20.8341 8.09022 20.7942 7.90519C20.7492 7.6966 20.7492 7.47751 20.7492 7.03931L20.7492 6.4505C20.7492 5.3304 20.7492 4.77035 20.5312 4.34252C20.3394 3.9662 20.0335 3.66024 19.6571 3.46849C19.2293 3.2505 18.6693 3.2505 17.5492 3.2505L16.9604 3.2505C16.5222 3.2505 16.3031 3.2505 16.0945 3.20548C15.9095 3.16554 15.731 3.09954 15.5646 3.00945C15.3769 2.90789 15.2105 2.7653 14.8778 2.48013L14.0817 1.79772Z" fill="#42A5F5"></path>
                  <path d="M16.5303 8.46979C16.8232 8.76269 16.8232 9.23756 16.5303 9.53045L11.5303 14.5305C11.3897 14.6711 11.1989 14.7501 11 14.7501C10.8011 14.7501 10.6103 14.6711 10.4697 14.5305L8.46967 12.5305C8.17678 12.2376 8.17678 11.7627 8.46967 11.4698C8.76256 11.1769 9.23744 11.1769 9.53033 11.4698L11 12.9395L15.4697 8.46979C15.7626 8.1769 16.2374 8.1769 16.5303 8.46979Z" fill="white"></path>
                </svg>
              )}
              {!postData.hideTrophies && (
                <div className="flex space-x-1">
                  <span>🏆</span>
                  <span>⭐</span>
                  <span>🥇</span>
                  <span>🎖️</span>
                  <span>🥈</span>
                  <span>🥉</span>
                  <span>⚡</span>
                  <span>🏅</span>
                  <span>🎗️</span>
                  <span>🎭</span>
                </div>
              )}
            </div>
            
            <h3 className="font-medium mb-2">{postData.text}</h3>
            
            <div className="flex items-center space-x-4 text-sm text-gray-500">
              {!postData.hideUpvotes && (
                <div className="flex items-center space-x-1">
                  <svg viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg" className="w-4 h-4">
                    <path d="M12 22.8C11.9136 22.8 11.826 22.8 11.7384 22.7928C10.4844 22.6956 9.3153 22.1218 8.47124 21.1894C7.62719 20.2569 7.17227 19.0367 7.19997 17.7792V13.2H3.43437C3.01826 13.2 2.61154 13.0764 2.26576 12.8449C1.91999 12.6134 1.65073 12.2845 1.49213 11.8998C1.33352 11.5151 1.2927 11.0919 1.37485 10.684C1.457 10.2761 1.65842 9.90176 1.95357 9.60844L11.292 0.336043C11.48 0.148743 11.7346 0.0435791 12 0.0435791C12.2654 0.0435791 12.5199 0.148743 12.708 0.336043L22.0464 9.60844C22.3414 9.90168 22.5428 10.2759 22.625 10.6837C22.7072 11.0915 22.6665 11.5146 22.508 11.8992C22.3496 12.2838 22.0805 12.6128 21.7349 12.8444C21.3893 13.076 20.9828 13.1997 20.5668 13.2H16.8V17.8584C16.8203 18.9814 16.459 20.0779 15.7752 20.9688C15.3262 21.5407 14.7529 22.0027 14.0988 22.32C13.4447 22.6373 12.727 22.8014 12 22.8ZM12 2.16844L3.22197 10.8852C3.17966 10.9273 3.1508 10.981 3.13904 11.0394C3.12728 11.0979 3.13314 11.1586 3.15589 11.2137C3.17864 11.2689 3.21725 11.316 3.26683 11.3492C3.31641 11.3823 3.37472 11.4001 3.43437 11.4H8.99997V17.7792C8.97957 18.5749 9.26054 19.3488 9.78659 19.9461C10.3126 20.5434 11.0449 20.9198 11.8368 21C12.2446 21.0265 12.6534 20.9674 13.0369 20.8265C13.4205 20.6855 13.7704 20.4659 14.064 20.1816C14.3614 19.9018 14.5981 19.5636 14.7591 19.1883C14.9201 18.813 15.0021 18.4085 15 18V11.4H20.5668C20.6266 11.4004 20.6851 11.3829 20.7349 11.3497C20.7847 11.3165 20.8234 11.2692 20.8461 11.2139C20.8688 11.1586 20.8744 11.0977 20.8623 11.0392C20.8502 10.9806 20.8208 10.927 20.778 10.8852L12 2.16844Z" fill="currentColor"></path>
                  </svg>
                  <span>{formatCount(postData.upvotes)}</span>
                </div>
              )}
              
              {!postData.hideComments && (
                <div className="flex items-center space-x-1">
                  <svg viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg" className="w-4 h-4">
                    <path d="M10 19H1.871a.886.886 0 0 1-.798-.52.886.886 0 0 1 .158-.941L3.1 15.771A9 9 0 1 1 10 19Zm-6.549-1.5H10a7.5 7.5 0 1 0-5.323-2.219l.54.545L3.451 17.5Z" fill="currentColor"></path>
                  </svg>
                  <span>{formatCount(postData.comments)}</span>
                </div>
              )}
              
              {!postData.hideShare && (
                <div className="flex items-center space-x-1">
                  <svg viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg" className="w-4 h-4">
                    <path d="M2.68675 22.4675C2.49173 22.4682 2.2985 22.4303 2.11814 22.3561C1.93778 22.2819 1.77384 22.1729 1.63571 22.0352C1.49759 21.8975 1.388 21.7339 1.31322 21.5538C1.23844 21.3737 1.19995 21.1806 1.19995 20.9855C1.19995 13.7999 5.78515 8.29194 12 7.80594V4.33914C12.0004 3.94836 12.1167 3.56649 12.3342 3.24185C12.5517 2.9172 12.8607 2.66437 13.2219 2.51535C13.5832 2.36633 13.9805 2.32781 14.3636 2.40467C14.7468 2.48153 15.0985 2.67032 15.3744 2.94714L23.6544 11.2895C23.8424 11.4786 23.9479 11.7345 23.9479 12.0011C23.9479 12.2678 23.8424 12.5236 23.6544 12.7127L15.3744 20.9351C15.0986 21.2127 14.7466 21.4021 14.363 21.4792C13.9795 21.5563 13.5817 21.5177 13.2201 21.3683C12.8585 21.2189 12.5494 20.9654 12.3322 20.64C12.115 20.3146 11.9993 19.932 12 19.5407V16.2287C8.91235 16.5203 7.24675 18.3143 5.34355 20.3627C4.81915 20.9267 4.28635 21.5015 3.71635 22.0511C3.44035 22.3187 3.07075 22.4687 2.68675 22.4675ZM12.9 9.57114C7.48915 9.57114 3.35515 14.0855 3.02635 20.1971C3.36835 19.8467 3.69715 19.4891 4.02475 19.1375C6.19195 16.7999 8.43355 14.3879 12.9 14.3879H13.8V19.5407C13.7976 19.5757 13.807 19.6105 13.8265 19.6396C13.8461 19.6687 13.8747 19.6905 13.908 19.7015C13.9395 19.7162 13.9749 19.7204 14.0091 19.7135C14.0432 19.7066 14.0742 19.6889 14.0976 19.6631L21.8232 11.9999L14.0976 4.21674C14.0743 4.1908 14.0433 4.17305 14.0091 4.16613C13.975 4.15922 13.9395 4.1635 13.908 4.17834C13.8749 4.18976 13.8465 4.21164 13.827 4.24065C13.8075 4.26967 13.798 4.30424 13.8 4.33914V9.57114H12.9Z" fill="currentColor"></path>
                  </svg>
                  <span>Share</span>
                </div>
              )}
            </div>
          </div>
        </div>
      </Card>
    </div>
  );
};
